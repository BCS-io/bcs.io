#!/usr/bin/env bash


#
# list webserver log files
#

server=noss.bcs.io

print_usage() {
  printf "dbg_log help\n\n"
  printf "Listing NGINX log files:\n"
  printf "a access.log\n"
  printf "A bcs-io-access.log\n"
  printf "e error.log\n"
  printf "E bcs-io-error.log\n"
}

log_file=''

if [ $# -eq 0 ]; then
  print_usage
  exit
fi


while getopts 'aAbeEh' flag; do
  case "${flag}" in
    a) log_file=access.log ;;
    A) log_file=bcs-io-access.log ;;
    e) log_file=error.log ;;
    E) log_file=bcs-io-error.log ;;
    h) print_usage
       exit 1 ;;
    *) print_usage
       exit 1;;
  esac
done


if [[ -n $log_file ]]; then
  log_file="/var/log/nginx/${log_file}"
  echo "NGINX Logs: ${server} ${log_file}"
  echo ""

  ansible $server -a "cat ${log_file}"
fi